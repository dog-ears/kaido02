# 作業フロー

## 1. 作業開始

作業開始と言われたら、現在ステータスが未着手・進行中のタスクを表示して、どれに取り掛かるかを聞いてください。

## 2. タスク着手

着手するといわれたタスクのステータスを進行中にしてください。

## 3. ブランチ作成

main ブランチから新しいブランチを作成してください。

新しいブランチの命名ルールは、`tasks/[タスクのID]` です。

例: タスク ID が 11 の場合、`tasks/11`

## 4. 作業

タスクの作業を行います。

## 5. コミット

作業が終わったら、コミットします。

コミットメッセージのつけ方は以下のルールとします。

```
【[タスクのID]】[プレフィックス]: [修正内容]
```

例: `【11】docs: 作業フロー追加`

コミットは、.ai 関連、docs 関連、それ以外を別々にコミットしてください。

- .ai 関連のときは「ai_rule」をプレフィックスとして使用
- docs 関連のときは「docs」をプレフィックスとして使用
- それ以外のときはプレフィックスと直後の「: 」は不要です。

## 6. プッシュ

ブランチをリモートリポジトリにプッシュします。

```bash
git push origin tasks/[タスクのID]
```

例: `git push origin tasks/11`

## 7. プルリクエスト作成

GitHub CLI を使用してプルリクエストを作成します。

プルリクエストの本文には、Notion のタスク名と URL を記載してください。

```bash
gh pr create --title "【[タスクのID]】[タイトル]" --body "Notionタスク：[タスク名]

[タスクのURL]

[説明]"
```

例:

```bash
gh pr create --title "【11】作業フロー追加" --body "Notionタスク：作業の一連の流れを決めてルール化する

https://www.notion.so/2a9829eddd48805cb6eec539b60d2388

作業フロードキュメントを追加しました"
```

プルリクエスト作成後、Vercel のプレビューデプロイが自動的に作成され、プルリクエストにコメントが追加されます。

プレビュー URL の形式: `https://[プロジェクト名]-git-[ブランチ名]-[ユーザー名]-projects.vercel.app`

例: `https://kaido02-git-tasks-11-dogears-projects.vercel.app/`

## 8. Notion タスクに PR URL を追加・ステータスを検証中に変更

プルリクエスト作成後、以下の 2 つを実行してください。

1. 作成されたプルリクエストの URL を Notion タスクの「PR URL」プロパティに追加
2. タスクのステータスを「検証中」に変更

プルリクエストの URL は、`gh pr create`コマンドの実行結果に表示されます。

例: `https://github.com/dog-ears/kaido02/pull/1`

Notion タスクの更新は、`.ai/rule.md`の Notion 操作に関するルールに従って、モデルを推奨モデルに切り替えてから実行してください。
